# 开源检查清单

在将项目上传到 GitHub 之前，请完成以下检查：

## ✅ 代码清理

- [ ] 删除所有硬编码路径（如 `/home/satuo/...`）
  - [ ] `labelme_tools/labelme2coco.py` - 修改 `OUTPUT_COCO_FILE`
  - [ ] `merge_json.py` - 修改 `root` 路径
  - [ ] `docs/convert_labelme_with_group_id.md` - 更新示例路径
  - [ ] 其他文件中的硬编码路径

- [ ] 检查并清理临时文件
  - [ ] 删除 `__pycache__/` 目录
  - [ ] 删除 `.pyc` 文件
  - [ ] 删除日志文件（`.log`）
  - [ ] 删除临时数据文件

- [ ] 确保 `.gitignore` 正确配置
  - [ ] 包含 `*.pth` 和 `checkpoints/`
  - [ ] 包含 `__pycache__/`
  - [ ] 包含 `*.log`
  - [ ] 包含 `data/`（如果数据不公开）

## ✅ 核心文件检查

- [ ] 数据集类文件存在
  - [ ] `mmpose/datasets/datasets/body/coco_parallel_dataset.py`
  - [ ] `configs/_base_/datasets/coco_parallel.py`
  - [ ] `mmpose/datasets/datasets/body/__init__.py` 已注册

- [ ] 配置文件完整
  - [ ] 训练配置文件
  - [ ] 数据集配置文件
  - [ ] 模型配置文件

## ✅ 文档准备

- [ ] README.md
  - [ ] 项目简介
  - [ ] 安装说明
  - [ ] 使用示例
  - [ ] 模型性能指标
  - [ ] 许可证说明

- [ ] 使用示例
  - [ ] 推理示例代码
  - [ ] 训练示例代码
  - [ ] 可视化示例代码

- [ ] 其他文档
  - [ ] 数据集格式说明
  - [ ] API 文档（如需要）
  - [ ] 常见问题（FAQ）

## ✅ 权重文件处理

- [ ] 权重文件准备
  - [ ] 确认权重文件路径：`checkpoints/best_coco_AP_epoch_110.pth`
  - [ ] 检查文件大小（如果 > 100MB，使用 Git LFS 或 Releases）

- [ ] 权重文件上传方案
  - [ ] 方案A：GitHub Releases（推荐）
    - [ ] 创建 Release
    - [ ] 上传权重文件
    - [ ] 在 README 中添加下载链接
  - [ ] 方案B：云存储服务
    - [ ] 上传到云存储
    - [ ] 在 README 中添加下载链接和提取码

## ✅ Git 仓库设置

- [ ] 初始化 Git 仓库
  ```bash
  git init
  git add .
  git commit -m "Initial commit: MMPose 21-keypoint model"
  ```

- [ ] 创建 GitHub 仓库
  - [ ] 仓库名称（建议：`mmpose-21keypoints`）
  - [ ] 仓库描述
  - [ ] 添加标签（tags）
  - [ ] 选择许可证（Apache 2.0）

- [ ] 推送代码
  ```bash
  git remote add origin https://github.com/yourusername/your-repo.git
  git branch -M main
  git push -u origin main
  ```

- [ ] 创建 Release
  - [ ] 版本号（如 v1.0.0）
  - [ ] Release 说明
  - [ ] 上传权重文件
  - [ ] 添加下载链接到 README

## ✅ 测试验证

- [ ] 在干净环境中测试
  - [ ] 克隆仓库
  - [ ] 安装依赖
  - [ ] 下载权重文件
  - [ ] 运行推理示例
  - [ ] 验证结果正确

- [ ] 代码测试
  - [ ] 运行单元测试（如有）
  - [ ] 检查代码风格
  - [ ] 验证导入正常

## ✅ 许可证和版权

- [ ] 确认许可证
  - [ ] Apache 2.0 许可证文件存在
  - [ ] README 中说明许可证
  - [ ] 致谢 MMPose 和 OpenMMLab

## ✅ 最终检查

- [ ] 运行检查脚本
  ```bash
  bash prepare_for_open_source.sh
  ```

- [ ] 检查所有 TODO 和 FIXME 注释
- [ ] 检查所有打印语句（考虑使用 logging）
- [ ] 确保代码注释清晰
- [ ] 检查配置文件中的路径都是相对路径

## 📝 快速修复硬编码路径

### 1. labelme_tools/labelme2coco.py
```python
# 修改前：
OUTPUT_COCO_FILE = '/home/satuo/code/Train_Parallel_Model/data/coco_annotations_id'

# 修改后：
OUTPUT_COCO_FILE = 'data/coco_annotations_id'  # 或使用命令行参数
```

### 2. merge_json.py
```python
# 修改前：
root = '/home/satuo/mmpose/data'

# 修改后：
root = 'data'  # 或使用命令行参数
```

### 3. 文档中的路径
将所有文档中的 `/home/satuo/...` 替换为相对路径或占位符。

## 🚀 发布流程

1. **完成所有检查项**
2. **运行准备脚本**：`bash prepare_for_open_source.sh`
3. **修复发现的问题**
4. **初始化 Git 并推送**
5. **创建 GitHub Release**
6. **更新 README 中的下载链接**
7. **测试安装和使用流程**

---

**完成所有检查项后，你的项目就可以成功开源了！** 🎉
