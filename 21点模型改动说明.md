# 21ç‚¹å§¿æ€ä¼°è®¡æ¨¡å‹æ”¹åŠ¨è¯´æ˜

## âœ… å·²æ·»åŠ çš„æ–‡ä»¶

### 1. æ ¸å¿ƒæ•°æ®é›†ç±»
- **æ–‡ä»¶**: `mmpose/datasets/datasets/body/coco_parallel_dataset.py`
- **è¯´æ˜**: 21ç‚¹éª¨éª¼æ¨¡å‹çš„æ•°æ®é›†ç±»ï¼ŒåŸºäºCOCOæ ¼å¼ï¼Œæ–°å¢4ä¸ªè„šéƒ¨å…³é”®ç‚¹
- **å¤§å°**: 13KB

### 2. æ•°æ®é›†é…ç½®
- **æ–‡ä»¶**: `configs/_base_/datasets/coco_parallel.py`
- **è¯´æ˜**: 21ç‚¹å…³é”®ç‚¹çš„å®šä¹‰ã€éª¨éª¼è¿æ¥ã€æƒé‡å’Œsigmaå€¼é…ç½®
- **å¤§å°**: 6.4KB

### 3. æ³¨å†Œæ›´æ–°
- **æ–‡ä»¶**: `mmpose/datasets/datasets/body/__init__.py`
- **è¯´æ˜**: å·²æ·»åŠ  `CocoParallelDataset` çš„å¯¼å…¥å’Œæ³¨å†Œ

## ğŸ“‹ 21ç‚¹å…³é”®ç‚¹å®šä¹‰

æœ¬æ¨¡å‹åŒ…å«21ä¸ªå…³é”®ç‚¹ï¼Œå®šä¹‰å¦‚ä¸‹ï¼š

| ID | åç§° | ç±»å‹ | è¯´æ˜ |
|----|------|------|------|
| 0-16 | COCOæ ‡å‡†17ç‚¹ | - | ä¸COCOæ•°æ®é›†ä¸€è‡´ |
| 17 | left_heel | lower | å·¦è„šè·Ÿ |
| 18 | right_heel | lower | å³è„šè·Ÿ |
| 19 | left_foot | lower | å·¦è„šå°– |
| 20 | right_foot | lower | å³è„šå°– |

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### å¯¼å…¥æ•°æ®é›†

```python
from mmpose.datasets import CocoParallelDataset

# åˆ›å»ºæ•°æ®é›†å®ä¾‹
dataset = CocoParallelDataset(
    ann_file='path/to/annotations.json',
    data_root='path/to/data',
    data_prefix=dict(img='images/'),
    pipeline=[...]
)
```

### ä½¿ç”¨é…ç½®æ–‡ä»¶

åœ¨è®­ç»ƒé…ç½®ä¸­å¼•ç”¨ï¼š

```python
# configs/body_2d_keypoint/your_config.py
_base_ = [
    '../_base_/datasets/coco_parallel.py',  # 21ç‚¹é…ç½®
    ...
]

data = dict(
    train=dict(
        type='CocoParallelDataset',  # ä½¿ç”¨21ç‚¹æ•°æ®é›†
        ann_file='path/to/train.json',
        ...
    ),
    ...
)
```

## ğŸ“ å¯é€‰ï¼šè®­ç»ƒç›¸å…³åŠŸèƒ½

å¦‚æœä½ çš„é¡¹ç›®è¿˜åŒ…å«ä»¥ä¸‹è®­ç»ƒç›¸å…³çš„æ”¹åŠ¨ï¼Œå¯ä»¥é€‰æ‹©æ€§æ·»åŠ ï¼š

### 1. åŠ æƒé‡‡æ ·å™¨ï¼ˆå¯é€‰ï¼‰
- **æ–‡ä»¶**: `mmpose/datasets/samplers/weighted_group_sampler.py`
- **è¯´æ˜**: åŸºäºgroup_idçš„åŠ æƒé‡‡æ ·å™¨ï¼Œç”¨äºè®­ç»ƒæ—¶å¯¹ä¸åŒç»„åˆ«çš„æ ·æœ¬è¿›è¡ŒåŠ æƒé‡‡æ ·
- **ç”¨é€”**: è®­ç»ƒä¼˜åŒ–ï¼Œä¸æ˜¯21ç‚¹æ¨¡å‹çš„æ ¸å¿ƒåŠŸèƒ½

### 2. åŠ æƒå˜æ¢ï¼ˆå¯é€‰ï¼‰
- **æ–‡ä»¶**: `mmpose/datasets/transforms/group_weight_transform.py`
- **è¯´æ˜**: åº”ç”¨group_idæƒé‡çš„æ•°æ®å˜æ¢
- **ç”¨é€”**: è®­ç»ƒä¼˜åŒ–ï¼Œä¸æ˜¯21ç‚¹æ¨¡å‹çš„æ ¸å¿ƒåŠŸèƒ½

## âœ… éªŒè¯

éªŒè¯21ç‚¹æ•°æ®é›†æ˜¯å¦å¯ä»¥æ­£å¸¸å¯¼å…¥ï¼š

```bash
cd /home/satuo/code/mmpose-main
python3 -c "from mmpose.datasets import CocoParallelDataset; print('âœ“ å¯¼å…¥æˆåŠŸ')"
```

## ğŸ¯ ä¸‹ä¸€æ­¥

1. âœ… æ ¸å¿ƒæ–‡ä»¶å·²æ·»åŠ åˆ°mmpose-main
2. ğŸ“ å¯ä»¥åˆ›å»º21ç‚¹æ¨¡å‹çš„è®­ç»ƒé…ç½®æ–‡ä»¶
3. ğŸ§ª æµ‹è¯•æ•°æ®é›†åŠŸèƒ½æ˜¯å¦æ­£å¸¸
4. ğŸ“¦ å‡†å¤‡ä½¿ç”¨å®˜æ–¹æºç  + 21ç‚¹æ¨¡å‹æ”¹åŠ¨

## ğŸ“Š æ–‡ä»¶å¯¹æ¯”

| æ–‡ä»¶ | å®˜æ–¹mmpose-main | æ·»åŠ å | çŠ¶æ€ |
|------|----------------|--------|------|
| coco_parallel_dataset.py | âŒ | âœ… | å·²æ·»åŠ  |
| coco_parallel.py | âŒ | âœ… | å·²æ·»åŠ  |
| __init__.py | âŒ | âœ… | å·²æ›´æ–° |

## ğŸ’¡ å»ºè®®

å¦‚æœåªéœ€è¦21ç‚¹æ¨¡å‹çš„æ¨ç†åŠŸèƒ½ï¼Œå½“å‰æ·»åŠ çš„æ–‡ä»¶å·²ç»è¶³å¤Ÿã€‚

å¦‚æœéœ€è¦è®­ç»ƒåŠŸèƒ½ï¼Œå¯ä»¥è€ƒè™‘æ·»åŠ ï¼š
- è®­ç»ƒé…ç½®æ–‡ä»¶ï¼ˆåœ¨ `configs/body_2d_keypoint/` ä¸‹ï¼‰
- å¯é€‰çš„è®­ç»ƒä¼˜åŒ–åŠŸèƒ½ï¼ˆsamplerå’Œtransformï¼‰
